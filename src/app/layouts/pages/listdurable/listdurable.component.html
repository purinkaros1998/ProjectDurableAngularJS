<div class="card">
   <div class="card-header">รายชื่อครุภัณฑ์ทั้งหมด
      <!-- Button trigger modal -->
      <button type="button" class="btn btn-primary btn-left ml-3" data-toggle="modal"
         data-target=".bd-example-modal-lg">
         <i class="fa fa-plus mt-1"></i>
         เพิ่มครุภัณฑ์
      </button>
      <!-- Modal -->
      <div class="modal fade bd-example-modal-lg" id="myLargeModalLabel" tabindex="-1" role="dialog"
         aria-labelledby="myLargeModalLabel" aria-hidden="true">
         <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
               <div class="modal-header">
                  <mat-card-title class="title">
                     <b>เพิ่มครุภัณฑ์สำนักงานสาธารณสุขจังหวัดนครราชสีมา</b>
                  </mat-card-title>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                  </button>
               </div>
               <div class="modal-body">
                  <mat-card-content>
                     <div class="row">
                        <div class="col-lg-6">
                           <mat-form-field appearance="outline">
                              <mat-label>หมายเลขครุภัณฑ์</mat-label>
                              <input [(ngModel)]="create.data_code" matInput="number" placeholder="หมายเลขครุภัณฑ์">
                           </mat-form-field>
                        </div>

                        <div class="col-lg-6">
                           <mat-form-field appearance="outline">
                              <mat-label>ยี่ห้อ ชนิด แบบ ขนาด ลักษณะ</mat-label>
                              <input [(ngModel)]="create.data_name" matInput="string"
                                 placeholder="ยี่ห้อ ชนิด แบบ ขนาด ลักษณะ">
                           </mat-form-field>
                        </div>

                     </div>
                  </mat-card-content>

                  <mat-card-content>
                     <div class="row">
                        <div class="col-lg-4">
                           <mat-form-field appearance="outline">
                              <mat-label>ราคา</mat-label>
                              <input [(ngModel)]="create.data_price" matInput="number" placeholder="ราคา">
                           </mat-form-field>
                        </div>

                        <div class="col-lg-4">
                           <mat-form-field appearance="outline">
                              <mat-label>ร้านค้า</mat-label>
                              <input [(ngModel)]="create.shop" matInput="string" placeholder="ราคา">
                           </mat-form-field>
                        </div>

                        <div class="col-lg-4">
                           <mat-form-field appearance="outline">
                              <mat-label>ประเภทครุภัณฑ์</mat-label>
                              <mat-select matNavitiveControl [(ngModel)]="create.category_id" name="item">
                                 <mat-option *ngFor="let item of categorys" [value]="item.category_id">
                                    {{item.category_name}}
                                 </mat-option>
                              </mat-select>
                           </mat-form-field>
                        </div>

                     </div>
                  </mat-card-content>

                  <mat-card-content>
                     <div class="row">
                        <div class="col-lg-6">
                           <mat-form-field appearance="outline">
                              <mat-label>แหล่งของงบประมาณ</mat-label>
                              <mat-select matNavitiveControl [(ngModel)]="create.budget_id" name="item">
                                 <mat-option *ngFor="let item of budgets" [value]="item.budget_id">
                                    {{item.budget_name}}
                                 </mat-option>
                              </mat-select>
                           </mat-form-field>
                        </div>

                        <div class="col-lg-6">
                           <mat-form-field appearance="outline">
                              <mat-label>กรุณาเลือกกลุ่มงาน</mat-label>
                              <mat-select matNavitiveControl [(ngModel)]="create.dep_id" name="item">
                                 <mat-option *ngFor="let item of departments" [value]="item.dep_id">
                                    {{item.dep_name}}
                                 </mat-option>
                              </mat-select>
                           </mat-form-field>
                        </div>
                     </div>
                  </mat-card-content>


                  <mat-card-content>
                     <div class="row">
                        <div class="col-lg-4">
                           <mat-form-field color="primary" appearance="outline">
                              <mat-label style="font-size:11">วันที่สั่งซื้อ</mat-label>
                              <input [(ngModel)]="create.buy_date" matInput [matDatepicker]="picker1"
                                 placeholder="วันที่สั่งซื้อ">
                              <mat-datepicker-toggle matSuffix [for]="picker1">
                              </mat-datepicker-toggle>
                              <mat-datepicker #picker1></mat-datepicker>
                           </mat-form-field>
                        </div>

                        <div class="col-lg-4">
                           <mat-form-field color="primary" appearance="outline">
                              <mat-label style="font-size:11">วันที่นำเข้า</mat-label>
                              <input [(ngModel)]="create.import_date" matInput [matDatepicker]="picker2"
                                 placeholder="วันที่นำเข้า">
                              <mat-datepicker-toggle matSuffix [for]="picker2">
                              </mat-datepicker-toggle>
                              <mat-datepicker #picker2></mat-datepicker>
                           </mat-form-field>
                        </div>

                        <div class="col-lg-4">
                           <mat-form-field color="primary" appearance="outline">
                              <mat-label style="font-size:11">วันที่ส่งออก</mat-label>
                              <input [(ngModel)]="create.transfer_date" matInput [matDatepicker]="picker3"
                                 placeholder="วันที่ส่งออก">
                              <mat-datepicker-toggle matSuffix [for]="picker3">
                              </mat-datepicker-toggle>
                              <mat-datepicker #picker3></mat-datepicker>
                           </mat-form-field>
                        </div>
                     </div>
                  </mat-card-content>

                  <mat-card-content>
                     <div class="row">
                        <div class="col-lg-4">
                           <mat-form-field appearance="outline">
                              <mat-label style="font-size:11">อายุการใช้งาน</mat-label>
                              <input matInput="number" type="number" length="2" min="1" max="90"
                                 [(ngModel)]="create.exp">
                           </mat-form-field>
                        </div>
                        <div class="col-lg-8">
                           <section class="style-section">
                              <span>สถานะ</span>
                              <mat-checkbox color="primary" class="style-margin" type="checkbox" [(ngModel)]="enable">
                                 จำหน่าย</mat-checkbox>
                              <mat-form-field class="mt-3" color="primary" appearance="outline">
                                 <mat-label>วันที่จำหน่าย</mat-label>
                                 <input matInput [matDatepicker]="picker4" placeholder="วันที่จำหน่าย"
                                    [disabled]="!enable" [(ngModel)]="create.distribution_date">
                                 <mat-datepicker-toggle matSuffix [for]="picker4">
                                 </mat-datepicker-toggle>
                                 <mat-datepicker #picker4></mat-datepicker>
                              </mat-form-field>
                           </section>

                        </div>
                     </div>
                  </mat-card-content>

                  <mat-card-content>
                     <div class="row">
                        <div class="col-lg-12">
                           <mat-form-field appearance="outline">
                              <mat-label style="font-size:11">หมายเหตุ</mat-label>
                              <input [(ngModel)]="create.note" matInput="text" placeholder="หมายเหตุ">
                           </mat-form-field>
                        </div>
                     </div>
                  </mat-card-content>

               </div>
               <div class="modal-footer">
                  <mat-card-content>
                     <button type="button" class="btn btn-primary" data-dismiss="modal"
                        (click)="savedurable()">เพิ่มครุภัณฑ์</button>
                     &nbsp; &nbsp;
                     <button type="button" class="btn btn-danger" (click)="btnReset()">ล้างข้อมูล
                     </button>

                  </mat-card-content>
               </div>
            </div>
         </div>
      </div>
   </div>
   <div class="card-body" style="overflow-y: auto; overflow-x: auto;">
      <div class="table-responsive">
         <table class="table table-bordered table-hover" id="users-list">
            <thead>
               <tr class="text-nowrap font-size">

                  <th scope="col">ลำดับ</th>
                  <th scope="col">หมายเลขครุภัณฑ์</th>
                  <th scope="col">ยี่ห้อ ชนิด แบบ ขนาด ลักษณะ</th>
                  <th scope="col">ประเภทครุภัณฑ์</th>
                  <th scope="col">ราคา</th>
                  <th scope="col">แหล่งของงบประมาณ</th>
                  <th scope="col">กลุ่มงาน</th>
                  <th scope="col">ร้านค้า</th>
                  <th scope="col">วันที่สั่งซื้อ</th>
                  <th scope="col">วันที่นำเข้า</th>
                  <th scope="col">วันที่ส่งออก</th>
                  <th scope="col">อายุการใช้งาน(ปี)</th>
                  <th scope="col">วันที่จำหน่าย</th>
                  <th scope="col">หมายเหตุ</th>
                  <th scope="col">จัดการครุภัณฑ์</th>
               </tr>
            </thead>
            <tbody>
               <tr class="text-nowrap"
                  *ngFor="let items of datadurables | paginate: { itemsPerPage: 10, currentPage: currentPage }; let i = index">
                  <th>{{ (10*currentPage)-10+ (i+1) }}</th>
                  <td style="vertical-align: middle">{{ items.data_code }}</td>
                  <td style="vertical-align: middle">{{ items.data_name }}</td>
                  <td style="vertical-align: middle">{{ items.category_name }}</td>
                  <td style="vertical-align: middle">{{ items.data_price | number }}</td>
                  <td style="vertical-align: middle">{{ items.budget_name }}</td>
                  <td style="vertical-align: middle">{{ items.dep_name }}</td>
                  <td style="vertical-align: middle">{{ items.shop }}</td>
                  <td style="vertical-align: middle">{{ items.buy_date | date: 'dd/MM/yyyy' }}</td>
                  <td style="vertical-align: middle; text-align: center;">{{ items.import_date | date: 'dd/MM/yyyy' }}</td>
                  <td style="vertical-align: middle">{{ items.transfer_date | date: 'dd/MM/yyyy' }}</td>
                  <td style="vertical-align: middle">{{ items.exp | number }}</td>
                  <td style="vertical-align: middle">{{ items.distribution_date | date: 'dd/MM/yyyy' }}</td>
                  <td style="vertical-align: middle">{{ items.note }}</td>
                  <td style="vertical-align: middle">
                     <button type="button" class="btn btn-warning btn-sm" data-toggle="modal"
                        data-target=".bd-Editdurable-modal-lg" (click)="geteditdatadurable(items.data_id)">
                        <i class="fas fa-user-edit"></i>แก้ไข</button>&nbsp;
                     <!-- Modal -->
                     <div class="modal fade bd-Editdurable-modal-lg" id="Editdurable" tabindex="-1" role="dialog"
                        aria-labelledby="Editdurable" aria-hidden="true">
                        <div class="modal-dialog modal-lg" role="document">
                           <div class="modal-content">
                              <div class="modal-header">
                                 <mat-card-title class="title">
                                    <b>แก้ไขครุภัณฑ์</b>
                                 </mat-card-title>
                                 <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                 </button>
                              </div>
                              <div class="modal-body">
                                 <mat-card-content>
                                    <div class="row">
                                       <div class="col-lg-6">
                                          <mat-form-field appearance="outline">
                                             <mat-label style="font-size:11">หมายเลขครุภัณฑ์</mat-label>
                                             <input matInput="text" value="{{editdurables.data_code}}"
                                                [(ngModel)]="create.data_code">
                                          </mat-form-field>
                                       </div>
                                       <div class="col-lg-6">
                                          <mat-form-field appearance="outline">
                                             <mat-label style="font-size:11">ยี่ห้อ ชนิด แบบ ขนาด ลักษณะ</mat-label>
                                             <input matInput="text" value="{{editdurables.data_name}}"
                                                [(ngModel)]="create.data_name">
                                          </mat-form-field>
                                       </div>
                                    </div>
                                 </mat-card-content>

                                 <mat-card-content>
                                    <div class="row">
                                       <div class="col-lg-4">
                                          <mat-form-field appearance="outline">
                                             <mat-label style="font-size:11">ราคา</mat-label>
                                             <input matInput="nubmer" value="{{editdurables.data_price | number}}"
                                                [(ngModel)]="create.data_price">
                                          </mat-form-field>

                                       </div>
                                       <div class="col-lg-4">
                                          <mat-form-field appearance="outline">
                                             <mat-label style="font-size:11">ร้านค้า</mat-label>
                                             <input matInput="text" value="{{editdurables.shop}}"
                                                [(ngModel)]="create.shop">
                                          </mat-form-field>
                                       </div>
                                       <div class="col-lg-4">

                                          <mat-form-field appearance="outline">

                                             <mat-label>ประเภทครุภัณฑ์</mat-label>
                                             <input [hidden]="!ShowCategory" matInput
                                                value="{{editdurables.category_name}}">
                                             <mat-select matNavitiveControl name="item"
                                                placeholder="{{editdurables.category_name}}"
                                                [(ngModel)]="create.category_id">
                                                <mat-option *ngFor="let item of categorys" [value]="item.category_id">
                                                   {{item.category_name}}
                                                </mat-option>
                                             </mat-select>
                                          </mat-form-field>
                                       </div>
                                    </div>
                                 </mat-card-content>

                                 <mat-card-content>
                                    <div class="row">
                                       <div class="col-lg-6">
                                          <mat-form-field appearance="outline">
                                             <mat-label>แหล่งของงบประมาณ</mat-label>
                                             <input [hidden]="!ShowBudget" matInput
                                                value="{{editdurables.budget_name}}">
                                             <mat-select matNavitiveControl name="item"
                                                placeholder="{{editdurables.budget_name}}"
                                                [(ngModel)]="create.budget_id">
                                                <mat-option *ngFor="let item of budgets" [value]="item.budget_id">
                                                   {{item.budget_name}}
                                                </mat-option>
                                             </mat-select>
                                          </mat-form-field>
                                       </div>
                                       <div class="col-lg-6">
                                          <mat-form-field appearance="outline">
                                             <mat-label>กลุ่มงาน</mat-label>
                                             <input [hidden]="!ShowDepartment" matInput
                                                value="{{editdurables.dep_name}}">
                                             <mat-select matNavitiveControl name="item"
                                                placeholder="{{editdurables.dep_name}}" [(ngModel)]="create.dep_id">
                                                <mat-option *ngFor="let item of departments" [value]="item.dep_id">
                                                   {{item.dep_name}}
                                                </mat-option>
                                             </mat-select>
                                          </mat-form-field>
                                       </div>
                                    </div>
                                 </mat-card-content>

                                 <mat-card-content>
                                    <div class="row">
                                       <div class="col-lg-4">
                                          <mat-form-field color="primary" appearance="outline">
                                             <mat-label>วันที่สั่งซื้อ</mat-label>
                                             <input matInput [matDatepicker]="picker4" value="{{editdurables.buy_date}}"
                                                [(ngModel)]="create.buy_date">
                                             <mat-datepicker-toggle matSuffix [for]="picker4">
                                             </mat-datepicker-toggle>
                                             <mat-datepicker #picker4></mat-datepicker>
                                          </mat-form-field>
                                       </div>

                                       <div class="col-lg-4">
                                          <mat-form-field color="primary" appearance="outline">
                                             <mat-label>วันที่นำเข้า</mat-label>
                                             <input matInput [matDatepicker]="picker5"
                                                value="{{editdurables.import_date}}" [(ngModel)]="create.import_date ">
                                             <mat-datepicker-toggle matSuffix [for]="picker5">
                                             </mat-datepicker-toggle>
                                             <mat-datepicker #picker5></mat-datepicker>
                                          </mat-form-field>
                                       </div>

                                       <div class="col-lg-4">
                                          <mat-form-field color="primary" appearance="outline">
                                             <mat-label>วันที่ส่งออก</mat-label>
                                             <input matInput [matDatepicker]="picker6"
                                                value="{{editdurables.transfer_date}}"
                                                [(ngModel)]="create.transfer_date">
                                             <mat-datepicker-toggle matSuffix [for]="picker6">
                                             </mat-datepicker-toggle>
                                             <mat-datepicker #picker6></mat-datepicker>
                                          </mat-form-field>
                                       </div>
                                    </div>
                                 </mat-card-content>

                                 <mat-card-content>
                                    <div class="row">
                                       <div class="col-lg-4">
                                          <mat-form-field appearance="outline">
                                             <mat-label style="font-size:11">อายุการใช้งาน</mat-label>
                                             <input matInput="number" type="number" length="2" min="1" max="90"
                                                value="{{editdurables.exp}}" [(ngModel)]="create.exp">
                                          </mat-form-field>
                                       </div>
                                       <div class="col-lg-8">
                                          <section class="style-section">
                                             <span>สถานะ</span>
                                             <mat-checkbox color="primary" class="style-margin" type="checkbox"
                                                [(ngModel)]="enable">
                                                จำหน่าย</mat-checkbox>
                                             <mat-form-field class="mt-3" color="primary" appearance="outline">
                                                <mat-label>วันที่จำหน่าย</mat-label>
                                                <input matInput [matDatepicker]="picker7" placeholder="วันที่จำหน่าย"
                                                   [disabled]="!enable" [(ngModel)]="create.distribution_date">
                                                <mat-datepicker-toggle matSuffix [for]="picker7">
                                                </mat-datepicker-toggle>
                                                <mat-datepicker #picker7></mat-datepicker>
                                             </mat-form-field>
                                          </section>

                                       </div>
                                    </div>
                                 </mat-card-content>

                                 <mat-card-content>
                                    <mat-form-field appearance="outline">
                                       <mat-label style="font-size:11">หมายเหตุ</mat-label>
                                       <input matInput="text" value="{{editdurables.note}}" [(ngModel)]="create.note">
                                    </mat-form-field>
                                 </mat-card-content>

                              </div>
                              <div class="modal-footer">
                                 <button type="button" class="btn btn-success" (click)="updateDurable()"
                                    data-dismiss="modal">
                                    <i class="fas fa-save"></i> บันทึก</button>
                                 <button type="button" class="btn btn-danger" data-dismiss="modal">ยกเลิก</button>
                              </div>
                           </div>
                        </div>
                     </div>
                     <button class="btn btn-danger btn-sm" (click)="deleteDurable(items.data_id)">
                        <i class="far fa-trash-alt"></i> ลบ
                     </button>
                  </td>
               </tr>
            </tbody>
         </table>
      </div>

   </div>
   <div class="card-footer text-muted">
      <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>
   </div>

</div>